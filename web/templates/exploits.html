{% extends "base.html" %}
{% block head %}
{{ super() }}
<script>
  function dropHandler(ev) {
    ev.preventDefault();

    if (ev.dataTransfer.items) {
      // Use DataTransferItemList interface to access the file(s)
      [...ev.dataTransfer.items].forEach((item, i) => {
        // If dropped items aren't files, reject them
        if (item.kind === "file") {
          const file = item.getAsFile();
          console.log("… file[${i}].name = ${file.name}");
        }
      });
    } else {
      // Use DataTransfer interface to access the file(s)
      [...ev.dataTransfer.files].forEach((file, i) => {
        console.log("… file[${i}].name = ${file.name}");
      });
    }
  }
</script>
<script>
  function dragOverHandler(ev) {
    ev.preventDefault();
    new_text =
      "flex justify-center w-full h-32 px-4 transition bg-primary rounded-md appearance-none cursor-pointer border-2 border-viola border-dashed";
    document.getElementById("dnd-box").setAttribute("class", new_text);
  }
</script>
<script>
  function dragLeaveHandler(ev) {
    new_text =
      "flex justify-center w-full h-32 px-4 transition bg-primary rounded-md appearance-none cursor-pointer hover:border-2 border-viola border-dashed";
    document.getElementById("dnd-box").setAttribute("class", new_text);
  }
</script>
{% endblock %}
{% block content %}
<div
  id="divisore_directory_or_drop"
  class="flex items-center justify-between gap-4 m-10"
>
  <!-- component -->
  <form
    action="http://localhost:5000/exploits"
    method="POST"
    enctype="multipart/form-data"
  >
    <div
      id="dnd-box"
      class="flex justify-center w-full h-32 px-4 transition bg-primary rounded-md appearance-none cursor-pointer hover:border-2 border-viola border-dashed focus:outline-none"
      ondrop="dropHandler(event);"
      ondragover="dragOverHandler(event);"
      ondragleave="dragLeaveHandler(event);"
    >
      <label>
        <span class="flex items-center space-x-2">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-6 h-6 text-secondary-600"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
            />
          </svg>
          <span class="font-medium text-secondary-600">
            Drop files to Attach, or
            <span class="text-viola hover:underline">browse</span>
          </span>
        </span>
        <input type="file" name="exploit_file" class="hidden" accept=".py" />
      </label>
      <button type="submit">Upload</button>
    </div>
  </form>
</div>
{% endblock %}
