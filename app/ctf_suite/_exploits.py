import importlib.util
import os
import sys
from pathlib import Path

p = Path("../exploits")
exploitsfiles = list(p.glob("**/[!_]*.py"))

exploits = []
for exp in exploitsfiles:
    name = exp.stem

    spec = importlib.util.spec_from_file_location(name, exp.resolve())
    module = importlib.util.module_from_spec(spec)
    sys.modules[name] = module
    spec.loader.exec_module(module)
    exploits.append(getattr(sys.modules[name], name))

exploitsNumber = len(exploits)
